<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç»™ä½ çš„ä¸“å±æƒŠå–œ â¤ï¸</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans SC', 'Microsoft YaHei', 'Arial', sans-serif;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
        }

        /* é¡µé¢å®¹å™¨ */
        .page {
            display: none;
            width: 100%;
            height: 100vh;
            justify-content: center;
            align-items: center;
            position: absolute;
            top: 0;
            left: 0;
            animation: fadeIn 0.8s ease-in-out;
        }

        .page.active {
            display: flex;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* å¼€åœºé¡µé¢ */
        #intro-page {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            cursor: pointer;
            flex-direction: column;
        }

        .intro-content {
            max-width: 850px;
            padding: 60px;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 30px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.25);
            text-align: center;
            border: 3px solid rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
        }

        #intro-text {
            font-size: 28px;
            line-height: 2;
            color: #2d3436;
            min-height: 250px;
            white-space: pre-wrap;
            font-weight: 400;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .cursor {
            display: inline-block;
            width: 3px;
            height: 28px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            animation: blink 1s infinite;
            margin-left: 3px;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .click-hint {
            margin-top: 40px;
            font-size: 22px;
            font-weight: 500;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }

        /* æ¸¸æˆé¡µé¢ */
        .game-page {
            flex-direction: column;
        }

        #game1-page {
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
        }

        #game2-page {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        #game3-page {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .game-container {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.25);
            border: 3px solid rgba(255, 255, 255, 0.6);
        }

        .game-title {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 25px;
            text-align: center;
            text-shadow: 0 2px 10px rgba(245, 87, 108, 0.2);
        }

        canvas {
            display: block;
            border: 4px solid;
            border-image: linear-gradient(135deg, #f093fb 0%, #f5576c 100%) 1;
            border-radius: 15px;
            background: linear-gradient(135deg, #fff5f7 0%, #fffef9 100%);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .game-info {
            margin-top: 20px;
            font-size: 19px;
            color: #555;
            text-align: center;
            font-weight: 400;
        }

        /* æ¸¸æˆè¯´æ˜æ¨¡æ€æ¡† */
        .instruction-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .instruction-modal.active {
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        .instruction-content {
            background: white;
            padding: 50px;
            border-radius: 30px;
            max-width: 600px;
            width: 90%;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.5);
            animation: slideInUp 0.5s ease-out;
            text-align: center;
            border: 3px solid rgba(245, 87, 108, 0.3);
        }

        @keyframes slideInUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .instruction-title {
            font-size: 30px;
            font-weight: 700;
            margin-bottom: 25px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .instruction-text {
            font-size: 20px;
            line-height: 1.8;
            color: #333;
            margin-bottom: 30px;
            white-space: pre-line;
        }

        .instruction-btn {
            padding: 18px 50px;
            font-size: 20px;
            font-weight: 600;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .instruction-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
        }

        /* é—®ç­”æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 50px;
            border-radius: 30px;
            max-width: 550px;
            width: 90%;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.5);
            animation: slideIn 0.5s ease-out;
            border: 3px solid rgba(245, 87, 108, 0.3);
        }

        @keyframes slideIn {
            from {
                transform: scale(0.7);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .question {
            font-size: 24px;
            font-weight: 500;
            color: #2d3436;
            margin-bottom: 35px;
            text-align: center;
            line-height: 1.8;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .option-btn {
            padding: 20px 35px;
            font-size: 20px;
            font-weight: 500;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.4s;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .option-btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.5);
        }

        .option-btn:active {
            transform: translateY(-1px);
        }

        /* å¤±è´¥é¡µé¢ */
        .failure-page {
            flex-direction: column;
        }

        #failure1-page {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
        }

        #failure2-page {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        .failure-content {
            max-width: 700px;
            padding: 60px;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 30px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.25);
            text-align: center;
            border: 3px solid rgba(255, 255, 255, 0.6);
            animation: shakeIn 0.8s ease-out;
        }

        @keyframes shakeIn {
            0% { transform: scale(0.8) rotate(-5deg); opacity: 0; }
            50% { transform: scale(1.05) rotate(5deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .failure-emoji {
            font-size: 100px;
            margin-bottom: 30px;
            animation: swing 1s infinite;
        }

        @keyframes swing {
            0%, 100% { transform: rotate(-10deg); }
            50% { transform: rotate(10deg); }
        }

        .failure-title {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 25px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .failure-text {
            font-size: 22px;
            line-height: 2;
            color: #2d3436;
            margin-bottom: 35px;
            white-space: pre-line;
        }

        .continue-btn {
            padding: 18px 50px;
            font-size: 20px;
            font-weight: 600;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .continue-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
        }

        /* è¿‡æ¸¡é¡µé¢ï¼ˆè§†é¢‘å‰ï¼‰ */
        #transition-page {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            cursor: pointer;
        }

        .transition-content {
            max-width: 800px;
            padding: 60px;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 30px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.25);
            text-align: center;
            border: 3px solid rgba(255, 255, 255, 0.6);
            animation: bounceIn 0.8s ease-out;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.1); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }

        .transition-emoji {
            font-size: 100px;
            margin-bottom: 30px;
            animation: rotate 2s linear infinite;
        }

        @keyframes rotate {
            0% { transform: rotate(0deg) scale(1); }
            50% { transform: rotate(180deg) scale(1.2); }
            100% { transform: rotate(360deg) scale(1); }
        }

        .transition-title {
            font-size: 42px;
            font-weight: 700;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 2s infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px rgba(245, 87, 108, 0.5); }
            50% { text-shadow: 0 0 40px rgba(245, 87, 108, 0.8); }
        }

        .transition-message {
            font-size: 26px;
            line-height: 2;
            color: #2d3436;
            white-space: pre-line;
            margin-bottom: 40px;
        }

        .transition-hint {
            font-size: 22px;
            font-weight: 500;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: pulse 2s infinite;
        }

        /* è§†é¢‘é¡µé¢ */
        #video-page {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            flex-direction: column;
        }

        .video-container {
            background: rgba(255, 255, 255, 0.98);
            padding: 40px;
            border-radius: 30px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.25);
            border: 3px solid rgba(255, 255, 255, 0.6);
        }

        video {
            max-width: 600px;
            width: 100%;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        /* ç­”é¢˜é”™è¯¯æç¤º */
        .wrong-answer {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 150px;
            z-index: 2000;
            animation: wrongShake 0.5s ease-in-out;
        }

        .wrong-answer.show {
            display: block;
        }

        @keyframes wrongShake {
            0%, 100% { transform: translate(-50%, -50%) rotate(0deg) scale(1); }
            25% { transform: translate(-50%, -50%) rotate(-15deg) scale(1.2); }
            75% { transform: translate(-50%, -50%) rotate(15deg) scale(1.2); }
        }

        /* æœ€ç»ˆé¡µé¢ */
        #final-page {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        }

        .final-content {
            max-width: 800px;
            padding: 60px;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 30px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.25);
            text-align: center;
            border: 3px solid rgba(255, 255, 255, 0.6);
            animation: heartPop 0.8s ease-out;
        }

        @keyframes heartPop {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .heart-icon {
            font-size: 80px;
            margin-bottom: 30px;
            animation: heartbeat 1.5s infinite;
            filter: drop-shadow(0 5px 15px rgba(245, 87, 108, 0.4));
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.15); }
            50% { transform: scale(1); }
        }

        .final-message {
            font-size: 24px;
            line-height: 2;
            color: #2d3436;
            white-space: pre-wrap;
            font-weight: 400;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        /* æ˜Ÿæ˜ŸèƒŒæ™¯åŠ¨ç”» */
        .stars {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.5); }
        }

        /* çˆ±å¿ƒåŠ¨ç”»èƒŒæ™¯ */
        .hearts {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .heart {
            position: absolute;
            font-size: 30px;
            animation: float 8s infinite;
            opacity: 0.7;
            filter: drop-shadow(0 0 10px rgba(255, 182, 193, 0.6));
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(-150px) rotate(360deg);
                opacity: 0;
            }
        }

        /* ç²’å­æ•ˆæœ */
        .particles {
            position: fixed;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.9) 0%, rgba(255, 182, 193, 0.5) 100%);
            border-radius: 50%;
            animation: particleFloat 6s infinite;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        }

        @keyframes particleFloat {
            0% {
                transform: translateY(0) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(50px);
                opacity: 0;
            }
        }

        /* éŸ³ä¹æ§åˆ¶æŒ‰é’® */
        .music-control {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            z-index: 3000;
            transition: all 0.4s;
            animation: musicPulse 2s infinite;
        }

        .music-control:hover {
            transform: scale(1.1);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.6);
        }

        .music-control.playing {
            animation: musicPulse 2s infinite, rotate 3s linear infinite;
        }

        @keyframes musicPulse {
            0%, 100% { box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4); }
            50% { box-shadow: 0 15px 40px rgba(102, 126, 234, 0.7); }
        }

        .music-icon {
            font-size: 28px;
            color: white;
            transition: transform 0.3s;
        }

        .music-control:active .music-icon {
            transform: scale(0.9);
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .intro-content, .final-content {
                padding: 40px 30px;
                max-width: 95%;
            }

            #intro-text, .final-message {
                font-size: 20px;
            }

            .game-container {
                padding: 25px;
            }

            canvas {
                max-width: 100%;
                height: auto;
            }

            .instruction-content, .modal-content {
                padding: 35px 25px;
            }
        }
    </style>
</head>
<body>
    <!-- æ˜Ÿæ˜ŸèƒŒæ™¯ -->
    <div class="stars" id="stars"></div>
    
    <!-- ç²’å­æ•ˆæœ -->
    <div class="particles" id="particles"></div>
    
    <!-- çˆ±å¿ƒèƒŒæ™¯ -->
    <div class="hearts" id="hearts"></div>

    <!-- å¼€åœºé¡µé¢ -->
    <div id="intro-page" class="page active">
        <div class="intro-content">
            <div id="intro-text"></div>
            <div class="click-hint" id="click-hint" style="display: none;">
                âœ¨ ç‚¹å‡»ä»»æ„åŒºåŸŸç»§ç»­ âœ¨
            </div>
        </div>
    </div>

    <!-- æ¸¸æˆ1å¤±è´¥é¡µé¢ -->
    <div id="failure1-page" class="page failure-page">
        <div class="failure-content">
            <div class="failure-emoji">ğŸ˜­</div>
            <div class="failure-title">å“å‘€ï¼Œè¢«æŠ“åˆ°äº†ï¼</div>
            <div class="failure-text">
æ²¡å…³ç³»å•¦ï¼Œå¤±è´¥æ˜¯æˆåŠŸä¹‹æ¯~
å°±åƒæˆ‘ä»¬çš„çˆ±æƒ…ä¸€æ ·ï¼Œ
ç»å†è¿‡é£é›¨æ‰èƒ½è§å½©è™¹ã€‚

æ¥ä¸‹æ¥ï¼Œå›ç­”å‡ ä¸ªå°é—®é¢˜ï¼Œ
è®©æˆ‘çœ‹çœ‹ä½ æœ‰å¤šäº†è§£æˆ‘ä»¬çš„å…³ç³»~ ğŸ’•
            </div>
            <button class="continue-btn" onclick="continueAfterFailure(1)">å¥½çš„ï¼Œå¼€å§‹ç­”é¢˜ ğŸ’ª</button>
        </div>
    </div>

    <!-- æ¸¸æˆ1é¡µé¢ -->
    <div id="game1-page" class="page game-page">
        <div class="game-container">
            <div class="game-title">ç¬¬ä¸€å…³ - èº²é¿æŒ‘æˆ˜ ğŸ®</div>
            <canvas id="game1-canvas" width="600" height="400"></canvas>
            <div class="game-info">æç¤ºï¼šä½¿ç”¨æ–¹å‘é”®ç§»åŠ¨ï¼Œå°½é‡ä¸è¦ç¢°åˆ°éšœç¢ç‰©å“¦~ ğŸ˜Š</div>
        </div>
    </div>

    <!-- æ¸¸æˆ2å¤±è´¥é¡µé¢ -->
    <div id="failure2-page" class="page failure-page">
        <div class="failure-content">
            <div class="failure-emoji">ğŸ¥º</div>
            <div class="failure-title">å·®ä¸€ç‚¹ç‚¹å°±æˆåŠŸäº†ï¼</div>
            <div class="failure-text">
çœ‹æ¥è¿™å…³æœ‰ç‚¹éš¾å‘¢~
ä¸è¿‡æ²¡å…³ç³»ï¼Œ
ä½ åœ¨æˆ‘å¿ƒé‡Œæ°¸è¿œéƒ½æ˜¯æœ€æ£’çš„ï¼

å†æ¥å›ç­”å‡ ä¸ªé—®é¢˜ï¼Œ
è¯æ˜ä½ å¯¹æˆ‘çš„å¿ƒæ„å§~ â¤ï¸
            </div>
            <button class="continue-btn" onclick="continueAfterFailure(2)">ç»§ç»­ç­”é¢˜ï¼ŒåŠ æ²¹ï¼ğŸ’–</button>
        </div>
    </div>

    <!-- æ¸¸æˆ2é¡µé¢ -->
    <div id="game2-page" class="page game-page">
        <div class="game-container">
            <div class="game-title">ç¬¬äºŒå…³ - æ¥çƒæŒ‘æˆ˜ ğŸ’—</div>
            <canvas id="game2-canvas" width="600" height="400"></canvas>
            <div class="game-info">æç¤ºï¼šä½¿ç”¨æ–¹å‘é”®å·¦å³ç§»åŠ¨,æ¥ä½ä¸‹è½çš„å¿ƒå½¢~ â¤ï¸</div>
        </div>
    </div>

    <!-- æ¸¸æˆ3é¡µé¢ -->
    <div id="game3-page" class="page game-page">
        <div class="game-container">
            <div class="game-title">ç¬¬ä¸‰å…³ - æ”¶é›†çˆ±å¿ƒ ğŸ’•</div>
            <canvas id="game3-canvas" width="600" height="400"></canvas>
            <div class="game-info">æç¤ºï¼šç‚¹å‡»å±å¹•ä¸Šçš„çˆ±å¿ƒæ”¶é›†å®ƒä»¬~ ğŸ’–</div>
        </div>
    </div>

    <!-- è¿‡æ¸¡é¡µé¢ï¼ˆè§†é¢‘å‰ï¼‰ -->
    <div id="transition-page" class="page">
        <div class="transition-content">
            <div class="transition-emoji">ğŸ‰</div>
            <div class="transition-title">æ­å–œé—¯å…³æˆåŠŸï¼</div>
            <div class="transition-message">
äº²çˆ±çš„ï¼Œä½ å¤ªæ£’äº†ï¼

æˆ‘ä»¬çš„å…³ç³»å°±åƒè¿™é—¯å…³æ¸¸æˆä¸€æ ·ï¼Œ
ä¼šæœ‰æŒ‘æˆ˜ï¼Œä¼šæœ‰å›°éš¾ï¼Œ
ä½†åªè¦æˆ‘ä»¬åœ¨ä¸€èµ·ï¼Œ
å°±èƒ½å…‹æœä¸€åˆ‡ï¼

æ¥ä¸‹æ¥ï¼Œæ˜¯ç»™ä½ çš„ä¸“å±å¥–åŠ±~
å‡†å¤‡å¥½æ¥æ”¶æˆ‘çš„çˆ±äº†å—ï¼ŸğŸ’
            </div>
            <div class="transition-hint">âœ¨ ç‚¹å‡»ä»»æ„åŒºåŸŸæŸ¥çœ‹å¥–åŠ± âœ¨</div>
        </div>
    </div>

    <!-- è§†é¢‘é¡µé¢ -->
    <div id="video-page" class="page">
        <div class="video-container">
            <video id="reward-video" controls>
                <source src="è§†é¢‘.MOV" type="video/mp4">
                <source src="è§†é¢‘.mov" type="video/mp4">
                <source src="video.MOV" type="video/mp4">
                <source src="video.mov" type="video/mp4">
                æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾
            </video>
        </div>
    </div>

    <!-- æœ€ç»ˆé¡µé¢ -->
    <div id="final-page" class="page">
        <div class="final-content">
            <div class="heart-icon">ğŸ’–</div>
            <div class="final-message">
äº²çˆ±çš„ qyjï¼š

æ­å–œä½ é€šå…³äº†æ‰€æœ‰æŒ‘æˆ˜ï¼
å°±åƒæ¸¸æˆä¸€æ ·ï¼Œæˆ‘ä»¬çš„æ¯ä¸€å¤©éƒ½å……æ»¡äº†æƒŠå–œå’ŒæŒ‘æˆ˜ã€‚
ä½†åªè¦æˆ‘ä»¬åœ¨ä¸€èµ·ï¼Œä»»ä½•å›°éš¾éƒ½èƒ½å…‹æœã€‚

ä½ æ˜¯æˆ‘ç”Ÿå‘½ä¸­æœ€ç¾å¥½çš„å¥‡é‡ï¼Œ
æ˜¯æˆ‘æ¯ä¸ªæ¸…æ™¨é†’æ¥çš„ç†ç”±ï¼Œ
æ˜¯æˆ‘æ¯ä¸ªå¤œæ™šå…¥ç¡å‰çš„ç‰µæŒ‚ã€‚

æ„Ÿè°¢ä½ å‡ºç°åœ¨æˆ‘çš„ç”Ÿå‘½é‡Œï¼Œ
è®©æˆ‘çš„ä¸–ç•Œå˜å¾—å¦‚æ­¤ç¾å¥½ã€‚

æˆ‘çˆ±ä½  â¤ï¸

æ°¸è¿œçˆ±ä½ çš„é‚£ä¸ªäºº
            </div>
        </div>
    </div>

    <!-- æ¸¸æˆè¯´æ˜æ¨¡æ€æ¡† -->
    <div id="instruction-modal" class="instruction-modal">
        <div class="instruction-content">
            <div class="instruction-title" id="instruction-title">æ¸¸æˆè¯´æ˜</div>
            <div class="instruction-text" id="instruction-text"></div>
            <button class="instruction-btn" id="start-game-btn">æˆ‘å‡†å¤‡å¥½äº†ï¼å¼€å§‹æ¸¸æˆ ğŸ®</button>
        </div>
    </div>

    <!-- é—®ç­”æ¨¡æ€æ¡† -->
    <div id="question-modal" class="modal">
        <div class="modal-content">
            <div class="question" id="question-text"></div>
            <div class="options">
                <button class="option-btn" id="option-a"></button>
                <button class="option-btn" id="option-b"></button>
            </div>
        </div>
    </div>

    <!-- ç­”é¢˜é”™è¯¯æç¤º -->
    <div class="wrong-answer" id="wrong-answer">ğŸ˜ </div>

    <!-- èƒŒæ™¯éŸ³ä¹ -->
    <audio id="bg-music" loop>
        <source src="music.mp3" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾
    </audio>

    <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
    <div class="music-control" id="music-control">
        <div class="music-icon" id="music-icon">ğŸ”‡</div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentPage = 'intro';
        let currentQuestionIndex = 0;
        let currentGame = 1;
        let isMusicPlaying = false;
        let musicAttempted = false;

        // éŸ³ä¹æ§åˆ¶
        const bgMusic = document.getElementById('bg-music');
        const musicControl = document.getElementById('music-control');
        const musicIcon = document.getElementById('music-icon');

        // åˆ‡æ¢éŸ³ä¹æ’­æ”¾çŠ¶æ€
        function toggleMusic() {
            if (isMusicPlaying) {
                bgMusic.pause();
                musicIcon.textContent = 'ğŸ”‡';
                musicControl.classList.remove('playing');
                isMusicPlaying = false;
            } else {
                bgMusic.play().then(() => {
                    musicIcon.textContent = 'ğŸµ';
                    musicControl.classList.add('playing');
                    isMusicPlaying = true;
                }).catch(error => {
                    console.log('éŸ³ä¹æ’­æ”¾å¤±è´¥:', error);
                });
            }
        }

        // å°è¯•è‡ªåŠ¨æ’­æ”¾éŸ³ä¹ï¼ˆåœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡äº¤äº’åï¼‰
        function tryPlayMusic() {
            if (!musicAttempted) {
                musicAttempted = true;
                bgMusic.play().then(() => {
                    musicIcon.textContent = 'ğŸµ';
                    musicControl.classList.add('playing');
                    isMusicPlaying = true;
                }).catch(error => {
                    // è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œç­‰å¾…ç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»
                    console.log('è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œéœ€è¦ç”¨æˆ·äº¤äº’');
                    musicIcon.textContent = 'ğŸ”‡';
                });
            }
        }

        // éŸ³ä¹æ§åˆ¶æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        musicControl.addEventListener('click', toggleMusic);

        // æ¸¸æˆè¯´æ˜å†…å®¹
        const gameInstructions = {
            game1: {
                title: "ç¬¬ä¸€å…³ - èº²é¿æŒ‘æˆ˜ ğŸ®",
                text: "æ¬¢è¿æ¥åˆ°ç¬¬ä¸€å…³ï¼\n\nåœ¨è¿™ä¸ªå…³å¡ä¸­ï¼Œä½ éœ€è¦æ§åˆ¶å°äººèº²é¿ä¸æ–­ä¸‹è½çš„éšœç¢ç‰©ã€‚\n\næ“ä½œæ–¹å¼ï¼šä½¿ç”¨é”®ç›˜çš„ â†‘ â†“ â† â†’ æ–¹å‘é”®ç§»åŠ¨ä½ çš„è§’è‰²ã€‚\n\næ¸©é¦¨æç¤ºï¼šè¿™ä¸€å…³æœ‰ç‚¹éš¾åº¦å“¦ï¼Œä¸è¦æ‹…å¿ƒç¢°åˆ°éšœç¢ç‰©ï¼Œé‚£æ ·æˆ‘ä»¬æ‰èƒ½è¿›å…¥ç”œèœœçš„é—®ç­”ç¯èŠ‚~ ğŸ’•"
            },
            game2: {
                title: "ç¬¬äºŒå…³ - æ¥çƒæŒ‘æˆ˜ ğŸ’—",
                text: "æ­å–œè¿›å…¥ç¬¬äºŒå…³ï¼\n\nè¿™æ¬¡ä½ éœ€è¦æ¥ä½ä»å¤©è€Œé™çš„çˆ±å¿ƒï¼Œä¸è¦è®©å®ƒä»¬æ‰åˆ°åœ°ä¸Šå“¦ï¼\n\næ“ä½œæ–¹å¼ï¼šä½¿ç”¨é”®ç›˜çš„ â† â†’ å·¦å³æ–¹å‘é”®ç§»åŠ¨æŒ¡æ¿ã€‚\n\nç‰¹åˆ«æç¤ºï¼šé”™è¿‡3ä¸ªçˆ±å¿ƒå°±ä¼šè¿›å…¥é—®ç­”ç¯èŠ‚å•¦~ åŠ æ²¹ï¼ğŸ’ª"
            },
            game3: {
                title: "ç¬¬ä¸‰å…³ - æ”¶é›†çˆ±å¿ƒ ğŸ’•",
                text: "æœ€åä¸€å…³å•¦ï¼\n\nè¿™å…³æ¯”è¾ƒç®€å•ï¼Œç‚¹å‡»å±å¹•ä¸Šæ¼‚æµ®çš„çˆ±å¿ƒæ¥æ”¶é›†å®ƒä»¬ï¼\n\næ“ä½œæ–¹å¼ï¼šç”¨é¼ æ ‡ç‚¹å‡»çˆ±å¿ƒå³å¯ã€‚\n\nç›®æ ‡ï¼šæ”¶é›†10ä¸ªçˆ±å¿ƒå°±èƒ½é€šå…³ï¼Œè·å¾—ä½ çš„ä¸“å±å¥–åŠ±ï¼âœ¨"
            }
        };

        // é—®é¢˜æ•°æ®
        const questions = {
            game1: [
                {
                    question: "ä½ æ˜å¤©æœ€æƒ³è§åˆ°çš„æ˜¯è°ï¼Ÿ",
                    optionA: "æˆ‘",
                    optionB: "å…¶ä»–äºº",
                    answer: "A"
                },
                {
                    question: "å¦‚æœæœ‰ä¸€å¤©å¯ä»¥è‡ªç”±æ”¯é…ï¼Œä½ æœ€æƒ³å’Œè°ä¸€èµ·åº¦è¿‡ï¼Ÿ",
                    optionA: "å’Œä½ ä¸€èµ·",
                    optionB: "ä¸€ä¸ªäººå®…åœ¨å®¶",
                    answer: "A"
                }
            ],
            game2: [
                {
                    question: "åœ¨ä½ å¿ƒé‡Œï¼Œè°æ˜¯æœ€ç‰¹åˆ«çš„é‚£ä¸ªäººï¼Ÿ",
                    optionA: "æ˜¯ä½ å•Š",
                    optionB: "è¿˜åœ¨å¯»æ‰¾ä¸­",
                    answer: "A"
                },
                {
                    question: "å¦‚æœå¯ä»¥è®¸ä¸€ä¸ªæ„¿æœ›ï¼Œä½ ä¼šè®¸ä»€ä¹ˆï¼Ÿ",
                    optionA: "å’Œä½ æ°¸è¿œåœ¨ä¸€èµ·",
                    optionB: "ä¸­å½©ç¥¨",
                    answer: "A"
                }
            ]
        };

        // å¼€åœºæ‰“å­—æ•ˆæœ
        const introText = "qyj ä½ å¥½ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨ä¸€èµ·çš„ç¬¬ä¸€å¤©ï¼Œé¦–å…ˆè®©æˆ‘ä»¬ç©ä¸€ä¸ªè¶£å‘³å°æ¸¸æˆï¼Œé€šå…³åå¯è·å¾—ä½ çš„ä¸“å±å¥–åŠ±ï¼Œ\nè®©æˆ‘ä»¬å¼€å§‹å§ï¼Œç‚¹å‡»ä»»æ„åŒºåŸŸç»§ç»­...";
        let introIndex = 0;

        function typeIntro() {
            if (introIndex < introText.length) {
                document.getElementById('intro-text').innerHTML += introText[introIndex];
                introIndex++;
                setTimeout(typeIntro, 80);
            } else {
                document.getElementById('intro-text').innerHTML += '<span class="cursor"></span>';
                document.getElementById('click-hint').style.display = 'block';
            }
        }

        // é¡µé¢åˆ‡æ¢
        function switchPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            currentPage = pageId;
        }

        // æ˜¾ç¤ºæ¸¸æˆè¯´æ˜
        function showInstruction(gameNum) {
            const instruction = gameNum === 1 ? gameInstructions.game1 : 
                               gameNum === 2 ? gameInstructions.game2 : 
                               gameInstructions.game3;
            
            document.getElementById('instruction-title').textContent = instruction.title;
            document.getElementById('instruction-text').textContent = instruction.text;
            document.getElementById('instruction-modal').classList.add('active');
            
            currentGame = gameNum;
        }

        // å¼€å§‹æ¸¸æˆ
        function startGameAfterInstruction() {
            document.getElementById('instruction-modal').classList.remove('active');
            
            if (currentGame === 1) {
                startGame1();
            } else if (currentGame === 2) {
                startGame2();
            } else if (currentGame === 3) {
                startGame3();
            }
        }

        // æ˜¾ç¤ºé—®ç­”
        function showQuestions(gameNum) {
            currentQuestionIndex = 0;
            currentGame = gameNum;
            showNextQuestion();
        }

        function showNextQuestion() {
            const questionSet = currentGame === 1 ? questions.game1 : questions.game2;
            if (currentQuestionIndex < questionSet.length) {
                const q = questionSet[currentQuestionIndex];
                document.getElementById('question-text').textContent = q.question;
                document.getElementById('option-a').textContent = `A. ${q.optionA}`;
                document.getElementById('option-b').textContent = `B. ${q.optionB}`;
                document.getElementById('question-modal').classList.add('active');
            } else {
                // æ‰€æœ‰é—®é¢˜å›ç­”å®Œæ¯•ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªæ¸¸æˆ
                document.getElementById('question-modal').classList.remove('active');
                if (currentGame === 1) {
                    switchPage('game2-page');
                    setTimeout(() => showInstruction(2), 500);
                } else {
                    switchPage('game3-page');
                    setTimeout(() => showInstruction(3), 500);
                }
            }
        }

        // ç­”æ¡ˆæ£€æŸ¥
        function checkAnswer(selected) {
            const questionSet = currentGame === 1 ? questions.game1 : questions.game2;
            const q = questionSet[currentQuestionIndex];
            if (selected === q.answer) {
                currentQuestionIndex++;
                showNextQuestion();
            } else {
                // ç­”é”™äº†ï¼Œæ˜¾ç¤ºç”Ÿæ°”è¡¨æƒ…
                showWrongAnswer();
            }
        }

        // æ˜¾ç¤ºç­”é¢˜é”™è¯¯æç¤º
        function showWrongAnswer() {
            const wrongAnswerEl = document.getElementById('wrong-answer');
            wrongAnswerEl.classList.add('show');
            setTimeout(() => {
                wrongAnswerEl.classList.remove('show');
            }, 600);
        }

        // å¤±è´¥é¡µé¢åç»§ç»­ç­”é¢˜
        function continueAfterFailure(gameNum) {
            showQuestions(gameNum);
        }

        // åˆ›å»ºæ˜Ÿæ˜ŸèƒŒæ™¯
        function createStars() {
            const starsContainer = document.getElementById('stars');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        // çˆ±å¿ƒèƒŒæ™¯åŠ¨ç”»
        function createHearts() {
            const heartsContainer = document.getElementById('hearts');
            setInterval(() => {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.textContent = ['â¤ï¸', 'ğŸ’•', 'ğŸ’–', 'ğŸ’—', 'ğŸ’'][Math.floor(Math.random() * 5)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDuration = (Math.random() * 4 + 6) + 's';
                heart.style.fontSize = (Math.random() * 25 + 20) + 'px';
                heartsContainer.appendChild(heart);
                setTimeout(() => heart.remove(), 10000);
            }, 800);
        }

        // ç²’å­æ•ˆæœ
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            setInterval(() => {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 3 + 4) + 's';
                particle.style.animationDelay = Math.random() * 2 + 's';
                particlesContainer.appendChild(particle);
                setTimeout(() => particle.remove(), 8000);
            }, 300);
        }

        // ==================== æ¸¸æˆ1ï¼šèº²é¿æ¸¸æˆ ====================
        let game1Interval;
        function startGame1() {
            const canvas = document.getElementById('game1-canvas');
            const ctx = canvas.getContext('2d');
            
            let player = { x: 300, y: 350, width: 30, height: 30, speed: 5 };
            let obstacles = [];
            let keys = {};
            let gameOver = false;

            // åˆ›å»ºå¤§é‡éšœç¢ç‰©ï¼ˆå›°éš¾æ¨¡å¼ï¼‰
            for (let i = 0; i < 8; i++) {
                obstacles.push({
                    x: Math.random() * 570,
                    y: -Math.random() * 400 - 50,
                    width: 40,
                    height: 40,
                    speed: 3 + Math.random() * 3
                });
            }

            function drawPlayer() {
                ctx.fillStyle = '#ff6b9d';
                ctx.beginPath();
                ctx.arc(player.x + player.width/2, player.y + player.height/2, player.width/2, 0, Math.PI * 2);
                ctx.fill();
                
                // ç»˜åˆ¶ç©å®¶è¡¨æƒ…
                ctx.fillStyle = 'white';
                ctx.font = '20px Arial';
                ctx.fillText('ğŸ˜Š', player.x + 5, player.y + 23);
            }

            function drawObstacles() {
                obstacles.forEach(obs => {
                    const gradient = ctx.createLinearGradient(obs.x, obs.y, obs.x + obs.width, obs.y + obs.height);
                    gradient.addColorStop(0, '#764ba2');
                    gradient.addColorStop(1, '#667eea');
                    ctx.fillStyle = gradient;
                    ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
                    
                    // æ·»åŠ è¾¹æ¡†
                    ctx.strokeStyle = '#fff';
                    ctx.lineWidth = 2;
                    ctx.strokeRect(obs.x, obs.y, obs.width, obs.height);
                });
            }

            function update() {
                if (gameOver) return;

                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // ç§»åŠ¨ç©å®¶
                if (keys['ArrowLeft'] && player.x > 0) player.x -= player.speed;
                if (keys['ArrowRight'] && player.x < canvas.width - player.width) player.x += player.speed;
                if (keys['ArrowUp'] && player.y > 0) player.y -= player.speed;
                if (keys['ArrowDown'] && player.y < canvas.height - player.height) player.y += player.speed;

                // ç§»åŠ¨éšœç¢ç‰©
                obstacles.forEach(obs => {
                    obs.y += obs.speed;
                    if (obs.y > canvas.height) {
                        obs.y = -obs.height;
                        obs.x = Math.random() * (canvas.width - obs.width);
                    }

                    // ç¢°æ’æ£€æµ‹
                    if (player.x < obs.x + obs.width &&
                        player.x + player.width > obs.x &&
                        player.y < obs.y + obs.height &&
                        player.y + player.height > obs.y) {
                        gameOver = true;
                        clearInterval(game1Interval);
                        setTimeout(() => {
                            switchPage('failure1-page');
                        }, 500);
                    }
                });

                drawPlayer();
                drawObstacles();
            }

            document.addEventListener('keydown', (e) => keys[e.key] = true);
            document.addEventListener('keyup', (e) => keys[e.key] = false);

            game1Interval = setInterval(update, 1000/60);
        }

        // ==================== æ¸¸æˆ2ï¼šæ¥çƒæ¸¸æˆ ====================
        let game2Interval;
        let game2BallInterval;
        function startGame2() {
            const canvas = document.getElementById('game2-canvas');
            const ctx = canvas.getContext('2d');
            
            let paddle = { x: 270, y: 360, width: 80, height: 15, speed: 7 };
            let balls = [];
            let keys = {};
            let gameOver = false;
            let missCount = 0;

            // åˆ›å»ºå¿«é€Ÿä¸‹è½çš„çƒï¼ˆå›°éš¾æ¨¡å¼ï¼‰
            game2BallInterval = setInterval(() => {
                if (!gameOver && balls.length < 5) {
                    balls.push({
                        x: Math.random() * (canvas.width - 20),
                        y: 0,
                        size: 20,
                        speed: 4 + Math.random() * 3
                    });
                }
            }, 800);

            function drawPaddle() {
                const gradient = ctx.createLinearGradient(paddle.x, paddle.y, paddle.x + paddle.width, paddle.y);
                gradient.addColorStop(0, '#f5576c');
                gradient.addColorStop(1, '#f093fb');
                ctx.fillStyle = gradient;
                ctx.fillRect(paddle.x, paddle.y, paddle.width, paddle.height);
                
                // æ·»åŠ é«˜å…‰æ•ˆæœ
                ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                ctx.fillRect(paddle.x, paddle.y, paddle.width, 5);
            }

            function drawBalls() {
                balls.forEach(ball => {
                    ctx.fillStyle = '#ff6b9d';
                    ctx.font = '24px Arial';
                    ctx.fillText('â¤ï¸', ball.x, ball.y);
                });
            }

            function update() {
                if (gameOver) return;

                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // ç§»åŠ¨æŒ¡æ¿
                if (keys['ArrowLeft'] && paddle.x > 0) paddle.x -= paddle.speed;
                if (keys['ArrowRight'] && paddle.x < canvas.width - paddle.width) paddle.x += paddle.speed;

                // ç§»åŠ¨çƒ
                balls = balls.filter(ball => {
                    ball.y += ball.speed;

                    // æ£€æµ‹æ˜¯å¦æ¥åˆ°
                    if (ball.y + ball.size > paddle.y &&
                        ball.y + ball.size < paddle.y + paddle.height &&
                        ball.x > paddle.x && ball.x < paddle.x + paddle.width) {
                        return false; // æ¥åˆ°äº†ï¼Œç§»é™¤çƒ
                    }

                    // æ£€æµ‹æ˜¯å¦æ‰è½
                    if (ball.y > canvas.height) {
                        missCount++;
                        if (missCount >= 3) {
                            gameOver = true;
                            clearInterval(game2Interval);
                            clearInterval(game2BallInterval);
                            setTimeout(() => {
                                switchPage('failure2-page');
                            }, 500);
                        }
                        return false;
                    }

                    return true;
                });

                drawPaddle();
                drawBalls();

                // æ˜¾ç¤ºé”™è¿‡è®¡æ•°
                ctx.fillStyle = '#333';
                ctx.font = 'bold 20px Arial';
                ctx.fillText(`é”™è¿‡: ${missCount}/3`, 10, 35);
            }

            document.addEventListener('keydown', (e) => keys[e.key] = true);
            document.addEventListener('keyup', (e) => keys[e.key] = false);

            game2Interval = setInterval(update, 1000/60);
        }

        // ==================== æ¸¸æˆ3ï¼šç‚¹å‡»æ”¶é›†çˆ±å¿ƒ ====================
        function startGame3() {
            const canvas = document.getElementById('game3-canvas');
            const ctx = canvas.getContext('2d');
            
            let hearts = [];
            let score = 0;
            const targetScore = 10;
            let gameCompleted = false;

            // åˆ›å»ºçˆ±å¿ƒ
            function createHeart() {
                const heartTypes = ['ğŸ’•', 'ğŸ’–', 'ğŸ’—', 'ğŸ’', 'â¤ï¸'];
                hearts.push({
                    x: Math.random() * (canvas.width - 50) + 25,
                    y: Math.random() * (canvas.height - 50) + 25,
                    size: 30,
                    type: heartTypes[Math.floor(Math.random() * heartTypes.length)],
                    scale: 1,
                    pulseDir: 1
                });
            }

            // åˆå§‹åˆ›å»ºè¶³å¤Ÿçš„çˆ±å¿ƒ
            for (let i = 0; i < 8; i++) {
                createHeart();
            }

            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // ç»˜åˆ¶çˆ±å¿ƒï¼ˆå¸¦è„‰åŠ¨æ•ˆæœï¼‰
                hearts.forEach(heart => {
                    heart.scale += 0.01 * heart.pulseDir;
                    if (heart.scale > 1.2) heart.pulseDir = -1;
                    if (heart.scale < 0.9) heart.pulseDir = 1;
                    
                    ctx.save();
                    ctx.translate(heart.x, heart.y);
                    ctx.scale(heart.scale, heart.scale);
                    ctx.font = `${heart.size}px Arial`;
                    ctx.fillText(heart.type, -heart.size/2, heart.size/2);
                    ctx.restore();
                });

                // æ˜¾ç¤ºåˆ†æ•°ï¼ˆæ›´ç¾è§‚çš„æ ·å¼ï¼‰
                ctx.fillStyle = '#fff';
                ctx.fillRect(5, 5, 180, 45);
                ctx.strokeStyle = '#f5576c';
                ctx.lineWidth = 3;
                ctx.strokeRect(5, 5, 180, 45);
                
                ctx.fillStyle = '#f5576c';
                ctx.font = 'bold 24px Arial';
                ctx.fillText(`æ”¶é›†: ${score}/${targetScore}`, 15, 35);

                if (score >= targetScore && !gameCompleted) {
                    gameCompleted = true;
                    
                    // ç»˜åˆ¶èƒœåˆ©æ–‡å­—
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.95)';
                    ctx.fillRect(canvas.width/2 - 180, canvas.height/2 - 50, 360, 100);
                    
                    const gradient = ctx.createLinearGradient(canvas.width/2 - 150, 0, canvas.width/2 + 150, 0);
                    gradient.addColorStop(0, '#f093fb');
                    gradient.addColorStop(1, '#f5576c');
                    ctx.fillStyle = gradient;
                    ctx.font = 'bold 42px Arial';
                    ctx.fillText('æ­å–œé€šå…³ï¼ğŸ‰', canvas.width/2 - 150, canvas.height/2 + 15);
                    
                    setTimeout(() => {
                        switchPage('transition-page');
                    }, 2000);
                }
            }

            canvas.addEventListener('click', (e) => {
                if (gameCompleted) return;
                
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;

                let clicked = false;
                hearts = hearts.filter(heart => {
                    const heartX = heart.x;
                    const heartY = heart.y;
                    
                    if (!clicked && 
                        x > heartX - heart.size/2 && x < heartX + heart.size/2 &&
                        y > heartY - heart.size/2 && y < heartY + heart.size/2) {
                        score++;
                        clicked = true;
                        
                        // æ¯æ”¶é›†ä¸€ä¸ªå°±è¡¥å……ä¸€ä¸ªæ–°çš„
                        if (score < targetScore) {
                            createHeart();
                        }
                        return false;
                    }
                    return true;
                });

                draw();
            });

            setInterval(draw, 1000/60);
        }

        // æ’­æ”¾è§†é¢‘
        function playVideo() {
            const video = document.getElementById('reward-video');
            video.play();
            video.addEventListener('ended', () => {
                setTimeout(() => {
                    switchPage('final-page');
                }, 1000);
            });
        }

        // äº‹ä»¶ç›‘å¬
        document.getElementById('intro-page').addEventListener('click', function() {
            if (introIndex >= introText.length) {
                tryPlayMusic(); // å°è¯•æ’­æ”¾èƒŒæ™¯éŸ³ä¹
                switchPage('game1-page');
                setTimeout(() => showInstruction(1), 500);
            }
        });

        document.getElementById('transition-page').addEventListener('click', function() {
            switchPage('video-page');
            playVideo();
        });

        document.getElementById('start-game-btn').addEventListener('click', startGameAfterInstruction);
        document.getElementById('option-a').addEventListener('click', () => checkAnswer('A'));
        document.getElementById('option-b').addEventListener('click', () => checkAnswer('B'));

        // åˆå§‹åŒ–
        window.onload = function() {
            typeIntro();
            createStars();
            createHearts();
            createParticles();
        };
    </script>
</body>
</html>